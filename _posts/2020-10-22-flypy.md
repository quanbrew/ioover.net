---
layout: post
title: 小鹤输入法学习和使用心得
date: 2020-10-22 17:29:26 +0800
category: talk
summary: 今年我切换到了双拼，以及更进一步的双形
typora-root-url: ../
typora-copy-images-to: ../media
---

## 双拼篇

一直希望提高打字速度和准确率，于是打算学习双拼，考察了各种方案最后选了[小鹤](https://www.flypy.com/index.html)。原因如下：

* 本身方案口碑比较好。据说布局比较合理。
* 各种系统默认对小鹤的支持也挺好。除了 Windows 10 开发组和作者发生了些不愉快，结果是 Windows 10 直接做了个自定义任意双拼布局的设置，虽然有点麻烦但是还是能[设成小鹤的](https://ifttl.com/add-flypy-to-win10-microsoft-pinyin-and-other-configuration/)。
* 习惯了双拼还可以进一步去学习双形，经过训练可以达到五笔的速度和准确率。详细请看下面的双形小节。

在决定切换之前最好先在打字测速软件[^1]里面测试一下全拼打字速度，以供未来对比。我就没有预先测试速度，所以这篇文章也没办法给出速度对比了。

<aside>
在一切开始之前建议还是纠正一下指法，[这个网站](https://www.typingclub.com/)非常不错，顺便可以练习英文输入的能力。
</aside>


[^1]: 官方推荐的是[添雨跟打器的定制版](http://flypy.ys168.com/)，是个比较老的软件，需要试试它的功能。不过还是很够用的。

首先打印一个键位图放在容易看到的地方，这两周你会非常需要时不时盯着键位图的。最好在第一天就把所有设备都换成双拼，强迫自己用双拼，不然会前功尽弃。切换一开始会很有挫败感，这是正常的，别难过，你是最棒的。

从全拼切换到双拼需要大概两周的时间习惯，这两周打字效率当然会急速下降。两周以后，虽然有些键位还是会弄错（一般是“O”和“Z”，“Q”和“P”还有“T”），但已经能流畅打字了，接下来就会慢慢体会到双拼的改变了。

个人感觉用双拼更加舒服了。和速度关系不大。举个例子，比如说我打「上」这个字的时候需要输入 “shang” 如果有一个键按错了比如变成 “sjang”，我需要退格四次然后重新按 “hang” 四个键。双拼只需要输入 “uh”，就算 u 打错了也只需要退格两次重按两键。这种优势在手机输入中最明显了，双拼特别特别适合手机全键盘输入。

全拼到双拼的速度提升其实不是非常大的，日常使用中这点速度提升可能并没有多少作用。重要的是体验提升，打字是你每天都要重复上千字的事情，体验提升一点就很值得了。

但对我来说最难受的是选候选字，所有人都经历过在“shi”这类发音中选字的痛苦，其实我学小鹤一开始就是盯着「音形」去的。于是「双形篇」突入。

## 双形篇

小鹤的作者为双形设计了独立的音形结合输入法，所以要用双形最好用他做的输入法，但如果你是搜狗输入法用户，也可以学学双形，双形在搜狗输入法中似乎可以作为辅助码来使用。

小鹤的双形是一个字从首末拆出两个字根，再添到双拼的后面。比如说「字」这个字就是“zi”（双拼）+“bz”，“b”代表「宝盖头」，“z”是「子」。每个字都有这样由四个字母构成的编码。

可能你会觉得现在每个字都要按四个按键很麻烦，但其实很少需要打全四个的，四个码是编码上限。作者按照字频将常用的字都放在 1-3 长度的编码中。比如说「字」这个字，打“z”的时候出的字是「在」，打“zi”的时候就是「字」了，和双拼一样，而打全“zibz”反而出来的是「孳」，原因是虽然「字」和「孳」都是这个码，但「字」前面已经出现过了，所以“zibz”这个码位就让给「孳」了[^2]。在这种方式之下打字的重码率降到了很低，即使偶尔需要选字也只有一两个选项。

[^2]: 也可以设置「小鹤音形+」，这样输入“zibz”就有候选框可以选「字」字了。

小鹤也为常用词语编码了四键编码，二字词只需要和双拼一样输入就能打出来。大多数时候打字的感受是「有时会多加一两个键、需要频繁按空格键的双拼，并且不用选字」。于是用户在普通的双拼和小鹤音形间切换是接近无缝的，在学习音形的时候如果有需要就可以临时切换回普通双拼，我在手机上就是用的普通的双拼输入。

双拼的学习主要是肌肉记忆。照着键位图强行用，肌肉记忆形成了就行了。而[音形的学习](http://help.flypy.com/xhrm/1960602)则需要你[记忆一些「部件」，学习编码规则](https://www.flypy.com/xing.html)，如果用 Rime 的话还需要一点点技术能力。提升熟练度的时间也相对比较慢，我现在用了几个月有时还是磕磕绊绊的。

### 拆字规则

比起五笔等笔画输入法，小鹤的先进之处是作者制定了一套规则使得任意一个字都能唯一地拆出相同的编码，极大减少了记忆负担也减少了重码率。

[作者写的规则](https://www.flypy.com/xing.html)还算挺好懂。除了规则以外，你必须特地记忆的只有「部件」了，「部件」是所有拆字的基础，一定要好好记住。最好打印下图或者设成壁纸。

![小鹤部件](/media/小鹤部件.png)

特别要注意的是那些内部包含别的部件的部件。比如说「立」这个字，总是会忘记「立」自身是个部件，拆「靖」这样的字的时候就容易把第一个部件取成文字头。

小鹤的拆字规则实际使用中需要递归地去判断字中某个部分是否是「小字」，虽然不难，但不熟悉的拆分有时是会卡壳一下。用得多了自然会记住常用字的拆分。习惯拆分了以后最大的敌人还是提笔忘字。

这里有[文字拆分的在线查询](http://react.xhup.club/search)，非常好用。有个小窍门是如果不确定一个字是不是小字，可以查询一下看看，如果没有出现部件而全都是笔画的字就是「小字」。

### 输入法

作者第一级支持的输入法有很多独特的功能但是仅限 Windows，所以我用的是 Rime 版本，这一节记录一下我是怎么配置 Rime 的。

这类打单字能力很强的输入法是不需要如云词库、整句输入之类的功能的（这些正好是 Rime 的弱项）。词库都是固定记录的，新词的收录是谨慎而保守的，即便有些编码是空的正好可以放词进去也不一定会加，所以可以到[小鹤论坛的这个帖子](https://bbs.flypy.com/forum.php?mod=viewthread&tid=19)看看别的用户提议了哪些词，自己选择需要的加到词库文件（`flypy_user.txt`）里面。

我要在 macOS 和 Windows 同时使用，自然会希望能同步设置和词库。Rime 版本中，用户词库是文本文件。输入法配置是 YAML 的，所以把词库和配置放到云同步的文件夹，再用软链接的方式连接到配置文件夹就可以了（PowerShell 为例）：

```powershell
New-Item -Path $home\AppData\Roaming\Rime\flypy_user.txt -ItemType SymbolicLink -Value $home\Dropbox\Rime\flypy_user.txt
```

有一个小技巧是，由于[Rime 的配置支持 patch](https://github.com/rime/home/wiki/CustomizationGuide#%E5%AE%9A%E8%A3%BD%E6%8C%87%E5%8D%97)，能够在不覆盖原有配置的情况下改写设置。这样做的好处是更新的时候用新版本的配置文件覆盖旧的就新了。小鹤的配置文件是 `flypy.schema.yaml` 和 `flypyplus.schema.yaml` ，patch 的配置就名为 `flypy.custom.yaml` 和 `flypyplus.custom.yaml`，可以同一个文件软连接到这两个文件去。

<aside>
flypy 是「小鹤音形」，flypyplus 是「小鹤音形+」，区别是如果一个字的全码之前有过简码的话（比如之前例子中的「字」字），「小鹤音形」输入全码不会显示那个字，而「小鹤音形+」会以候选框的方式都显示出来。个人建议学习的时候用「小鹤音形+」，熟练的时候再试着切换。（我还没切换）
</aside>


`flypy.custom.yaml`  中内容大概是这样的：

```yaml
patch:
  style/horizontal: false
  menu/page_size: 6
  speller/max_code_length: 32 # 混杂英文输入的时候稍微流畅点，看运气
  key_binder/bindings:
    - {accept: bracketleft, send: Page_Up, when: paging} # [上翻页
    - {accept: bracketright, send: Page_Down, when: has_menu} # ]下翻页
    - {accept: comma, send: comma, when: paging} # 注销逗号翻页
    - {accept: period, send: period, when: has_menu} # 注销句号翻页
```

### 练习

就像[这个视频](https://www.bilibili.com/video/BV1at411Y7c1)展现的，小鹤音形能达到很高的键入速度，但这需要刻意去练习。这是[作者写的练习方式](http://help.flypy.com/zhiyin/1958969)。

下载[小鹤的网盘](http://flypy.ys168.com/)里面提供的「[小鹤专用添雨跟打器.zip](http://ys-f.ys168.com/116124336/l524K6J3N75MLUiTwstW/小鹤专用添雨跟打器.zip)」打开后，在菜单里面选择「发文」，选择常用500字，字数限定在每段10字，不要点乱序。打字时先按 Ctrl + R 打乱当前段落的顺序。作者推荐的的速度标准是「击键超过6换下一组」意思是要达到打字时每秒按6键的速度，并且不能有错误和退格回改。这一开始看起来是不可能的任务，其实是不难做到的，只是需要时间。到了5以后其实多重复就能上6了。不过这种事情也是有边际效益递减的，为了提高到击键6所花的时间成本不一定值得，日常使用的话把目标击键数设为5就挺好的。

打字这种重复练习，反复训练以后速度会逐渐提高，这其中是有乐趣的。有许多人把打文章作为一种娱乐，还时常在打字群里开展比赛，现在的打字软件就是为打字群准备的。[这里有一个打字软件提供的排行榜](https://www.jsxiaoshi.com/index.php/Home/Rank/saiwen)[^3]。我已经很久没练习了，大概只练了前50个字左右。练习很花时间，十个字要打到击键6我经常需要两个小时左右，而且不坚持巩固就会生疏。

[^3]: 可以看到排行榜前列经常和小鹤有关。我看到有人写的是「魔鹤」，没搜出来什么，只有只言片语和[一个很可怕的视频](https://www.bilibili.com/s/video/BV1se411p7Ni)。

### 感受

和双拼一样，最大的改善是打字时的体验。无需选字真的、真的很舒服。熟练以后可以不怎么注意候选框从能完全盲打。而和双拼不一样，音形有一个特别高的输入速度上限，能给你许诺一个未来的提升空间。而对我来说，即使没有那么大速度提升，为了不需要选字的流畅舒服感也值得去学习一下。

但蹩脚的地方也是有的。提笔忘字或者分不清平舌翘舌与前后音这种是我自己的问题。除此以外，输入的时候一大麻烦是字的重码变少了但是词的重码还是很多。有重码且不是最常用的词只能拆开来打了，然而在我输入完之前往往不知道这个码被用作更重要的词所以打不出来，经常输完了以后发现打不出词，只能删掉重打。[有些最常用的词有两键的简码](http://help.flypy.com/xhrm/1960613)这让试错变得更复杂了。这个问题看上去只能积累经验来克服了，老用户的建议是习惯打字而不是打词，如果不确定的话就直接一个字一个字把词打出来，不要总想着打词。

----------

P.S. 还有一类神奇的输入法叫做顶功类输入法，据说是不需要按空格键不需要选字的。看到[小鹤的作者讨论这类输入法](https://tieba.baidu.com/p/3279027138)。